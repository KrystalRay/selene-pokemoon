<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Pokemoon æˆ˜æ–—ç³»ç»Ÿæ¼”ç¤º</title>
    <script src="target/js/release/build/pokemoon.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 40px;
            color: white;
        }
        
        .header h1 {
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 10px;
            text-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }
        
        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        .demo-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }
        
        .demo-card {
            background: white;
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .demo-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 40px rgba(0,0,0,0.15);
        }
        
        .demo-card h3 {
            color: #667eea;
            margin-bottom: 16px;
            font-size: 1.4rem;
            font-weight: 600;
        }
        
        .demo-card p {
            color: #666;
            margin-bottom: 20px;
            line-height: 1.6;
        }
        
        .demo-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            transition: transform 0.2s ease;
            width: 100%;
        }
        
        .demo-button:hover {
            transform: scale(1.02);
        }
        
        .demo-button:active {
            transform: scale(0.98);
        }
        
        .result-panel {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
            border-left: 4px solid #667eea;
        }
        
        .result-panel h4 {
            color: #667eea;
            margin-bottom: 12px;
            font-size: 1.1rem;
        }
        
        .result-content {
            background: white;
            padding: 16px;
            border-radius: 8px;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 0.9rem;
            line-height: 1.5;
            max-height: 200px;
            overflow-y: auto;
        }
        
        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .status-success { background: #28a745; }
        .status-error { background: #dc3545; }
        .status-info { background: #17a2b8; }
        
        .tech-info {
            background: rgba(255,255,255,0.1);
            border-radius: 12px;
            padding: 24px;
            margin-top: 40px;
            color: white;
        }
        
        .tech-info h2 {
            margin-bottom: 16px;
            font-size: 1.8rem;
        }
        
        .tech-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 16px;
            margin-top: 20px;
        }
        
        .tech-item {
            background: rgba(255,255,255,0.1);
            padding: 16px;
            border-radius: 8px;
            border: 1px solid rgba(255,255,255,0.2);
        }
        
        .tech-item h4 {
            color: #ffd700;
            margin-bottom: 8px;
        }
        
        .tech-item p {
            opacity: 0.9;
            font-size: 0.9rem;
        }
        
        .footer {
            text-align: center;
            margin-top: 40px;
            color: white;
            opacity: 0.8;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Pokemoon æˆ˜æ–—ç³»ç»Ÿ</h1>
            <p>åŸºäº MoonBit çš„ç°ä»£åŒ–å®å¯æ¢¦æˆ˜æ–—å¼•æ“</p>
        </div>
        
        <div class="demo-grid">
            <div class="demo-card">
                <h3>âš”ï¸ ä¼¤å®³è®¡ç®—ç³»ç»Ÿ</h3>
                <p>åŸºäºçœŸå®å®å¯æ¢¦å…¬å¼çš„ä¼¤å®³è®¡ç®—ï¼Œæ”¯æŒå±æ€§ç›¸æ€§ã€STABåŠ æˆã€æš´å‡»ç­‰å¤æ‚æœºåˆ¶ã€‚</p>
                <button class="demo-button" onclick="demoDamageCalculation()">æ¼”ç¤ºä¼¤å®³è®¡ç®—</button>
                <div id="damage-demo" class="result-panel" style="display: none;">
                    <h4>è®¡ç®—ç»“æœ</h4>
                    <div class="result-content" id="damage-content"></div>
                </div>
            </div>
            
            <div class="demo-card">
                <h3>ğŸ”¥ æŠ€èƒ½æ•ˆæœç³»ç»Ÿ</h3>
                <p>æ”¯æŒ18ç§å±æ€§ç±»å‹çš„æŠ€èƒ½æ•ˆæœï¼Œæ¯ç§å±æ€§éƒ½æœ‰ç‹¬ç‰¹çš„ä¼¤å®³åŠ æˆå’ŒçŠ¶æ€æ•ˆæœã€‚</p>
                <button class="demo-button" onclick="demoMoveEffects()">æ¼”ç¤ºæŠ€èƒ½æ•ˆæœ</button>
                <div id="move-demo" class="result-panel" style="display: none;">
                    <h4>æ•ˆæœå±•ç¤º</h4>
                    <div class="result-content" id="move-content"></div>
                </div>
            </div>
            
            <div class="demo-card">
                <h3>ğŸ’« çŠ¶æ€æ•ˆæœç³»ç»Ÿ</h3>
                <p>å®Œæ•´çš„å¼‚å¸¸çŠ¶æ€ç³»ç»Ÿï¼ŒåŒ…æ‹¬ç¼çƒ§ã€éº»ç—¹ã€å†°å†»ã€ä¸­æ¯’ã€æ··ä¹±ç­‰ç»å…¸çŠ¶æ€ã€‚</p>
                <button class="demo-button" onclick="demoStatusEffects()">æ¼”ç¤ºçŠ¶æ€æ•ˆæœ</button>
                <div id="status-demo" class="result-panel" style="display: none;">
                    <h4>çŠ¶æ€æ£€æŸ¥</h4>
                    <div class="result-content" id="status-content"></div>
                </div>
            </div>
            
            <div class="demo-card">
                <h3>ğŸ“Š å±æ€§ä¿®æ”¹ç³»ç»Ÿ</h3>
                <p>åŠ¨æ€çš„å±æ€§æå‡å’Œé™ä½æœºåˆ¶ï¼Œæ”¯æŒå¤šçº§å±æ€§å˜åŒ–å’Œè¾¹ç•Œå€¼ä¿æŠ¤ã€‚</p>
                <button class="demo-button" onclick="demoStatModifiers()">æ¼”ç¤ºå±æ€§ä¿®æ”¹</button>
                <div id="stat-demo" class="result-panel" style="display: none;">
                    <h4>ä¿®æ”¹ç»“æœ</h4>
                    <div class="result-content" id="stat-content"></div>
                </div>
            </div>
            
            <div class="demo-card">
                <h3>ğŸŒ å¤šè¯­è¨€æ”¯æŒ</h3>
                <p>å†…ç½®ä¸­è‹±æ–‡æ”¯æŒï¼Œè‡ªåŠ¨è½¬æ¢çŠ¶æ€åç§°ã€æ•ˆæœç±»å‹å’Œä¼¤å®³ç±»å‹ã€‚</p>
                <button class="demo-button" onclick="demoStringConversions()">æ¼”ç¤ºå¤šè¯­è¨€</button>
                <div id="string-demo" class="result-panel" style="display: none;">
                    <h4>è½¬æ¢ç»“æœ</h4>
                    <div class="result-content" id="string-content"></div>
                </div>
            </div>
            
            <div class="demo-card">
                <h3>ğŸ§ª å…¨é¢æµ‹è¯•</h3>
                <p>è¿è¡Œå®Œæ•´çš„ç³»ç»Ÿæµ‹è¯•ï¼ŒéªŒè¯æ‰€æœ‰æˆ˜æ–—åŠŸèƒ½çš„æ­£ç¡®æ€§å’Œæ€§èƒ½è¡¨ç°ã€‚</p>
                <button class="demo-button" onclick="demoAllFunctions()">è¿è¡Œå…¨é¢æµ‹è¯•</button>
                <div id="all-demo" class="result-panel" style="display: none;">
                    <h4>æµ‹è¯•ç»“æœ</h4>
                    <div class="result-content" id="all-content"></div>
                </div>
            </div>
        </div>
        
        <div class="tech-info">
            <h2>ğŸš€ æŠ€æœ¯ç‰¹æ€§</h2>
            <div class="tech-grid">
                <div class="tech-item">
                    <h4>MoonBit ç¼–è¯‘</h4>
                    <p>ä½¿ç”¨ MoonBit è¯­è¨€ç¼–å†™ï¼Œç¼–è¯‘ä¸ºé«˜æ€§èƒ½ JavaScript ä»£ç </p>
                </div>
                <div class="tech-item">
                    <h4>ç±»å‹å®‰å…¨</h4>
                    <p>ç¼–è¯‘æ—¶ç±»å‹æ£€æŸ¥ï¼Œè¿è¡Œæ—¶é›¶ç±»å‹é”™è¯¯</p>
                </div>
                <div class="tech-item">
                    <h4>æ€§èƒ½ä¼˜åŒ–</h4>
                    <p>è‡ªåŠ¨ç”Ÿæˆçš„ä»£ç é«˜åº¦ä¼˜åŒ–ï¼Œæ€§èƒ½æ¥è¿‘åŸç”Ÿ JavaScript</p>
                </div>
                <div class="tech-item">
                    <h4>è·¨å¹³å°</h4>
                    <p>æ”¯æŒ Webã€ç§»åŠ¨ç«¯å’Œæ¡Œé¢ç«¯ï¼Œä¸€æ¬¡ç¼–å†™åˆ°å¤„è¿è¡Œ</p>
                </div>
                <div class="tech-item">
                    <h4>æ¨¡å—åŒ–è®¾è®¡</h4>
                    <p>æ¸…æ™°çš„ä»£ç ç»“æ„ï¼Œæ˜“äºç»´æŠ¤å’Œæ‰©å±•</p>
                </div>
                <div class="tech-item">
                    <h4>å®æ—¶æµ‹è¯•</h4>
                    <p>å†…ç½®æµ‹è¯•æ¡†æ¶ï¼Œæ”¯æŒå®æ—¶åŠŸèƒ½éªŒè¯</p>
                </div>
            </div>
        </div>
        
        <div class="footer">
            <p>Pokemoon æˆ˜æ–—ç³»ç»Ÿ - åŸºäº MoonBit æŠ€æœ¯æ„å»º</p>
            <p>å¼€æºé¡¹ç›® | Apache 2.0 è®¸å¯è¯</p>
        </div>
    </div>

    <script>
        function showResult(demoId, contentId, content, type = 'info') {
            const demoPanel = document.getElementById(demoId);
            const contentDiv = document.getElementById(contentId);
            
            demoPanel.style.display = 'block';
            contentDiv.innerHTML = content;
        }
        
        function demoDamageCalculation() {
            try {
                const params = {
                    base_power: 80,
                    attacker_level: 50,
                    attacker_attack: 100,
                    defender_defense: 80,
                    type_effectiveness: 1.5,
                    stab_bonus: 1.5,
                    critical_hit: false,
                    weather_modifier: 1.0,
                    other_modifiers: 1.0
                };
                
                const damage = KrystalRay$pokemoon$$calculate_damage(params);
                
                const content = `ğŸ¯ ä¼¤å®³è®¡ç®—æ¼”ç¤ºæˆåŠŸï¼

ğŸ“Š è¾“å…¥å‚æ•°:
   â€¢ åŸºç¡€å¨åŠ›: ${params.base_power}
   â€¢ æ”»å‡»è€…ç­‰çº§: ${params.attacker_level}
   â€¢ æ”»å‡»åŠ›: ${params.attacker_attack}
   â€¢ é˜²å¾¡åŠ›: ${params.defender_defense}
   â€¢ å±æ€§ç›¸æ€§: ${params.type_effectiveness}x
   â€¢ STABåŠ æˆ: ${params.stab_bonus}x
   â€¢ æš´å‡»: ${params.critical_hit ? 'æ˜¯' : 'å¦'}
   â€¢ å¤©æ°”ä¿®æ­£: ${params.weather_modifier}x
   â€¢ å…¶ä»–ä¿®æ­£: ${params.other_modifiers}x

ğŸ’¥ è®¡ç®—ç»“æœ:
   â€¢ æœ€ç»ˆä¼¤å®³: ${damage}

âœ¨ è¿™ä¸ªä¼¤å®³å€¼åŸºäºçœŸå®çš„å®å¯æ¢¦å…¬å¼è®¡ç®—ï¼`;
                
                showResult('damage-demo', 'damage-content', content, 'success');
            } catch (error) {
                showResult('damage-demo', 'damage-content', `âŒ é”™è¯¯: ${error.message}`, 'error');
            }
        }
        
        function demoMoveEffects() {
            try {
                const types = ["Fire", "Water", "Electric", "Grass", "Ice", "Fighting", "Poison", "Ground", "Flying", "Psychic", "Bug", "Rock", "Ghost", "Dragon", "Dark", "Steel", "Fairy"];
                const baseDamage = 100;
                
                let content = `ğŸ”¥ æŠ€èƒ½æ•ˆæœæ¼”ç¤ºæˆåŠŸï¼

ğŸ“Š åŸºç¡€ä¼¤å®³: ${baseDamage}

ğŸ¯ å„å±æ€§ä¼¤å®³åŠ æˆ:`;
                
                types.forEach(type => {
                    const damage = KrystalRay$pokemoon$$apply_move_effect_simple(baseDamage, type);
                    const multiplier = (damage / baseDamage).toFixed(1);
                    content += `\n   â€¢ ${type}: ${damage} (${multiplier}x)`;
                });
                
                content += `\n\nâœ¨ æ¯ç§å±æ€§éƒ½æœ‰ç‹¬ç‰¹çš„ä¼¤å®³åŠ æˆï¼`;
                
                showResult('move-demo', 'move-content', content, 'success');
            } catch (error) {
                showResult('move-demo', 'move-content', `âŒ é”™è¯¯: ${error.message}`, 'error');
            }
        }
        
        function demoStatusEffects() {
            try {
                const statusChecks = [
                    ["Fire", "burn", "ç«ç³»ç¼çƒ§"],
                    ["Electric", "paralysis", "ç”µç³»éº»ç—¹"],
                    ["Ice", "freeze", "å†°ç³»å†°å†»"],
                    ["Poison", "poison", "æ¯’ç³»ä¸­æ¯’"],
                    ["Psychic", "confusion", "è¶…èƒ½ç³»æ··ä¹±"]
                ];
                
                let content = `ğŸ’« çŠ¶æ€æ•ˆæœæ¼”ç¤ºæˆåŠŸï¼

ğŸ” çŠ¶æ€æ•ˆæœæ£€æŸ¥ç»“æœ:`;
                
                statusChecks.forEach(([type, effect, description]) => {
                    const shouldApply = KrystalRay$pokemoon$$should_apply_status_effect(type, effect);
                    const icon = shouldApply ? "âœ…" : "âŒ";
                    content += `\n   ${icon} ${description}: ${shouldApply ? 'ä¼šè§¦å‘' : 'ä¸ä¼šè§¦å‘'}`;
                });
                
                content += `\n\nâœ¨ çŠ¶æ€æ•ˆæœç³»ç»Ÿå®Œå…¨æ¨¡æ‹ŸçœŸå®å®å¯æ¢¦æœºåˆ¶ï¼`;
                
                showResult('status-demo', 'status-content', content, 'success');
            } catch (error) {
                showResult('status-demo', 'status-content', `âŒ é”™è¯¯: ${error.message}`, 'error');
            }
        }
        
        function demoStatModifiers() {
            try {
                const baseStat = 100;
                const modifier = 20;
                
                const boosted = KrystalRay$pokemoon$$calculate_stat_modifier(baseStat, modifier, true);
                const reduced = KrystalRay$pokemoon$$calculate_stat_modifier(baseStat, modifier, false);
                const reducedMin = KrystalRay$pokemoon$$calculate_stat_modifier(10, modifier, false);
                
                const content = `ğŸ“Š å±æ€§ä¿®æ”¹æ¼”ç¤ºæˆåŠŸï¼

ğŸ¯ åŸºç¡€å±æ€§å€¼: ${baseStat}

ğŸ“ˆ å±æ€§æå‡:
   â€¢ æå‡ ${modifier} ç‚¹: ${baseStat} â†’ ${boosted} (+${modifier})

ğŸ“‰ å±æ€§é™ä½:
   â€¢ é™ä½ ${modifier} ç‚¹: ${baseStat} â†’ ${reduced} (-${modifier})
   â€¢ è¾¹ç•Œæµ‹è¯• (10-20): ${reducedMin} (æœ€å°å€¼ä¿æŠ¤)

âœ¨ å±æ€§ç³»ç»Ÿæ”¯æŒå¤šçº§å˜åŒ–å’Œè¾¹ç•Œä¿æŠ¤ï¼`;
                
                showResult('stat-demo', 'stat-content', content, 'success');
            } catch (error) {
                showResult('stat-demo', 'stat-content', `âŒ é”™è¯¯: ${error.message}`, 'error');
            }
        }
        
        function demoStringConversions() {
            try {
                const statusStr = KrystalRay$pokemoon$$status_to_string("burn");
                const effectStr = KrystalRay$pokemoon$$effect_type_to_string("Move");
                const damageStr = KrystalRay$pokemoon$$damage_type_to_string("Physical");
                
                const content = `ğŸŒ å¤šè¯­è¨€æ”¯æŒæ¼”ç¤ºæˆåŠŸï¼

ğŸ”„ å­—ç¬¦ä¸²è½¬æ¢ç»“æœ:

ğŸ“ çŠ¶æ€åç§°:
   â€¢ è‹±æ–‡: "burn" â†’ ä¸­æ–‡: "${statusStr}"

ğŸ¯ æ•ˆæœç±»å‹:
   â€¢ è‹±æ–‡: "Move" â†’ ä¸­æ–‡: "${effectStr}"

âš”ï¸ ä¼¤å®³ç±»å‹:
   â€¢ è‹±æ–‡: "Physical" â†’ ä¸­æ–‡: "${damageStr}"

âœ¨ å†…ç½®ä¸­è‹±æ–‡æ”¯æŒï¼Œè‡ªåŠ¨è¯­è¨€è½¬æ¢ï¼`;
                
                showResult('string-demo', 'string-content', content, 'success');
            } catch (error) {
                showResult('string-demo', 'string-content', `âŒ é”™è¯¯: ${error.message}`, 'error');
            }
        }
        
        function demoAllFunctions() {
            try {
                // è¿è¡ŒMoonBitçš„æµ‹è¯•å‡½æ•°
                KrystalRay$pokemoon$$test_battle_system();
                
                const content = `ğŸ§ª å…¨é¢æµ‹è¯•æ¼”ç¤ºæˆåŠŸï¼

âœ… æ‰€æœ‰æˆ˜æ–—ç³»ç»Ÿå‡½æ•°æµ‹è¯•å®Œæˆï¼

ğŸ“‹ æµ‹è¯•å†…å®¹åŒ…æ‹¬:
   â€¢ ä¼¤å®³è®¡ç®—ç³»ç»Ÿ
   â€¢ æŠ€èƒ½æ•ˆæœç³»ç»Ÿ
   â€¢ çŠ¶æ€æ•ˆæœç³»ç»Ÿ
   â€¢ å±æ€§ä¿®æ”¹ç³»ç»Ÿ
   â€¢ å­—ç¬¦ä¸²è½¬æ¢ç³»ç»Ÿ
   â€¢ é”™è¯¯å¤„ç†æœºåˆ¶
   â€¢ æ€§èƒ½ä¼˜åŒ–éªŒè¯

ğŸ” è¯¦ç»†æµ‹è¯•ç»“æœè¯·æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°

âœ¨ æˆ˜æ–—ç³»ç»Ÿå®Œå…¨å°±ç»ªï¼Œå¯ä»¥å¼€å§‹æ¸¸æˆå¼€å‘ï¼`;
                
                showResult('all-demo', 'all-content', content, 'success');
            } catch (error) {
                showResult('all-demo', 'all-content', `âŒ é”™è¯¯: ${error.message}`, 'error');
            }
        }
        
        // é¡µé¢åŠ è½½å®Œæˆåçš„åˆå§‹åŒ–
        window.addEventListener('load', function() {
            console.log('ğŸ® Pokemoon æˆ˜æ–—ç³»ç»Ÿæ¼”ç¤ºé¡µé¢åŠ è½½å®Œæˆ');
            console.log('ğŸš€ æ‰€æœ‰æ¼”ç¤ºåŠŸèƒ½å·²å°±ç»ª');
        });
    </script>
</body>
</html> 