# 战斗菜单按钮改进

## 功能特性

### 1. 改进的按钮布局
- 按钮文本现在显示在按钮的左侧，而不是下方
- 按钮位置调整为更合理的布局（x: 120, y: 280-370）
- 文本和按钮之间有适当的间距

### 2. 视觉反馈系统
- **普通状态**: 使用 `Play.png` 按钮图片
- **悬停状态**: 使用 `Achievements.png` 按钮图片（中等突出）
- **选中状态**: 使用 `Settings.png` 按钮图片（最突出）

### 3. 交互控制
- **鼠标点击**: 左键点击按钮选择对应选项
- **键盘导航**: 
  - 上下箭头键选择菜单选项
  - Z键、Enter键或空格键确认选择
- **视觉反馈**: 实时更新按钮外观以反映当前状态

### 4. 按钮选项
- **Fight**: 战斗选项
- **Bag**: 背包选项  
- **Pokemon**: 宝可梦管理选项
- **Run**: 逃跑选项（退出战斗）

## 使用方法

### 进入战斗
- 按 `A` 键进入战斗状态

### 菜单导航
- 使用 `↑` 和 `↓` 箭头键选择菜单选项
- 按 `Z`、`Enter` 或 `空格键` 确认选择
- 鼠标悬停和点击按钮进行选择

### 退出战斗
- 选择 `Run` 选项退出战斗

## 技术实现

### 碰撞检测
- 使用 `@collision.Area` 系统处理鼠标交互
- 按钮区域大小为 80x25 像素
- 启用鼠标监控 (`monitoring_mouse=true`)

### 状态管理
- `selected_option`: 当前选中的菜单选项
- `hovered_option`: 当前鼠标悬停的选项
- `button_entities`: 存储按钮实体的映射
- `button_text_entities`: 存储按钮文本实体的映射

### 视觉更新
- `update_button_visuals()` 函数根据状态更新按钮外观
- 实时响应键盘和鼠标输入
- 使用不同的按钮图片创建视觉层次

## 文件结构

- `src/battle.mbt`: 主要的战斗系统代码
- `pixel_adventure/Menu/Buttons/`: 按钮图片资源
  - `Play.png`: 普通状态按钮
  - `Achievements.png`: 悬停状态按钮  
  - `Settings.png`: 选中状态按钮

## 注意事项

1. 确保游戏系统包含 `@plugins.default_plugin` 以启用碰撞检测
2. 按钮图片路径必须正确配置
3. 所有按钮实体在退出战斗时会被自动清理 